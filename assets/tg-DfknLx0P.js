import{r as t,R as c}from"./vendor-BZx_mn6b.js";const p=()=>{var n;return typeof window<"u"&&(n=window)!=null&&(n=n.Telegram)!=null&&n.WebApp?window.Telegram.WebApp:null},g=t.createContext(p()),f={smoothButtonsTransition:!1,smoothButtonsTransitionMs:10},T=t.createContext(f),y=()=>({MainButton:{current:null},BackButton:{current:null}}),B=t.createContext({MainButton:{current:null},BackButton:{current:null}});function v(){return v=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var l=arguments[e];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(n[u]=l[u])}return n},v.apply(this,arguments)}const E=({children:n,options:e})=>{const l=(a=>{const[w,o]=t.useState(!1);return t.useEffect(()=>{var m;if(!a)return;if((m=window.Telegram)!=null&&m.WebApp)return void o(!0);const i=typeof window<"u"&&window.TelegramWebviewProxy&&window.TelegramWebviewProxy.postEvent;window.TelegramWebviewProxy?window.TelegramWebviewProxy.postEvent=(...d)=>{var s;i==null||i(...d),(s=window.Telegram)!=null&&s.WebApp&&(o(!0),window.TelegramWebviewProxy.postEvent=i)}:window.TelegramWebviewProxy={postEvent:(...d)=>{var s;i==null||i(...d),(s=window.Telegram)!=null&&s.WebApp&&(o(!0),delete window.TelegramWebviewProxy)}}},[a]),w})(!(e==null||!e.async)),u=t.useMemo(()=>v({},f,e),[e]),b=t.useMemo(y,[]),r=t.useMemo(p,[l]);return t.useEffect(()=>{if(e==null||!e.smoothButtonsTransition)return;const a=()=>{var w,o;r==null||(w=r.MainButton)==null||w.hide(),r==null||(o=r.BackButton)==null||o.hide()};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[r,e==null?void 0:e.smoothButtonsTransition]),c.createElement(B.Provider,{value:b},c.createElement(g.Provider,{value:r},c.createElement(T.Provider,{value:u},n)))};export{E as k};
//# sourceMappingURL=tg-DfknLx0P.js.map
