import{r as n,R as c}from"./vendor-BZx_mn6b.js";const p=()=>{var t;return typeof window<"u"&&(t=window)!=null&&(t=t.Telegram)!=null&&t.WebApp?window.Telegram.WebApp:null},f=n.createContext(p()),b={smoothButtonsTransition:!1,smoothButtonsTransitionMs:10},T=n.createContext(b),x=()=>({MainButton:{current:null},BackButton:{current:null}}),y=n.createContext({MainButton:{current:null},BackButton:{current:null}}),B=()=>n.useContext(f);function v(){return v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var l=arguments[e];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(t[u]=l[u])}return t},v.apply(this,arguments)}const E=({children:t,options:e})=>{const l=(a=>{const[w,o]=n.useState(!1);return n.useEffect(()=>{var m;if(!a)return;if((m=window.Telegram)!=null&&m.WebApp)return void o(!0);const i=typeof window<"u"&&window.TelegramWebviewProxy&&window.TelegramWebviewProxy.postEvent;window.TelegramWebviewProxy?window.TelegramWebviewProxy.postEvent=(...d)=>{var s;i==null||i(...d),(s=window.Telegram)!=null&&s.WebApp&&(o(!0),window.TelegramWebviewProxy.postEvent=i)}:window.TelegramWebviewProxy={postEvent:(...d)=>{var s;i==null||i(...d),(s=window.Telegram)!=null&&s.WebApp&&(o(!0),delete window.TelegramWebviewProxy)}}},[a]),w})(!(e==null||!e.async)),u=n.useMemo(()=>v({},b,e),[e]),g=n.useMemo(x,[]),r=n.useMemo(p,[l]);return n.useEffect(()=>{if(e==null||!e.smoothButtonsTransition)return;const a=()=>{var w,o;r==null||(w=r.MainButton)==null||w.hide(),r==null||(o=r.BackButton)==null||o.hide()};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[r,e==null?void 0:e.smoothButtonsTransition]),c.createElement(y.Provider,{value:g},c.createElement(f.Provider,{value:r},c.createElement(T.Provider,{value:u},t)))},h=()=>B();export{h as W,E as k};
//# sourceMappingURL=tg-DpJYHji4.js.map
